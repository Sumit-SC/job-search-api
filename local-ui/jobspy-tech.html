<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobSpy.tech - External Job Search</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-right">
                <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Theme">üåô</button>
                <a id="admin-link" href="monitor.html" class="admin-link" title="Admin">üîß</a>
            </div>
            <h1>üåê JobSpy.tech</h1>
            <p class="subtitle">Search jobs on JobSpy.tech (external site with Deep Search, skills & experience filters)</p>
            <p class="subtitle-brand">~ hosted Project by mitSu</p>
            <nav class="top-nav">
                <a href="index.html" class="nav-link">Core API</a>
                <a href="rssjobs.html" class="nav-link">RSSJobs.app</a>
                <a href="jobspy.html" class="nav-link">JobSpy</a>
                <a href="jobspy-tech.html" class="nav-link nav-link-active">JobSpy.tech</a>
                <a href="interview-prep.html" class="nav-link">Interview Prep</a>
            </nav>
        </header>

        <div class="controls-section">
            <div class="card">
                <h2>Open JobSpy.tech</h2>
                <p class="description">
                    <a href="https://www.jobspy.tech/jobs" target="_blank" rel="noopener noreferrer">JobSpy.tech</a> is a separate job search app with Deep Search, skills, experience level, and location filters. Use the link below to open it (same or prefilled from your search).
                </p>
                <div class="input-row">
                    <div class="input-group">
                        <label for="jtech-query">Query (optional):</label>
                        <input type="text" id="jtech-query" placeholder="e.g. data analyst" value="">
                    </div>
                    <div class="input-group">
                        <label for="jtech-location">Location (optional):</label>
                        <input type="text" id="jtech-location" placeholder="e.g. Remote, India" value="">
                    </div>
                </div>
                <p class="jobspy-tech-hint">If JobSpy.tech supports URL params, they will be applied when you click the button. Otherwise you can paste your query/location there.</p>
                <div class="jobspy-tech-actions" style="display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem; margin-top: 0.75rem;">
                    <a id="jtech-open-btn" href="https://www.jobspy.tech/jobs" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
                        Open JobSpy.tech in new tab
                    </a>
                    <button type="button" id="jtech-embed-toggle" class="btn btn-secondary" aria-expanded="false" aria-controls="jtech-embed-content">
                        Show embedded view
                    </button>
                </div>
            </div>
        </div>

        <div id="jtech-embed-section" class="card" style="margin-top: 1rem; display: none;">
            <h2 style="margin-bottom: 0.5rem;">Embedded JobSpy.tech</h2>
            <p class="description" style="margin-bottom: 0.75rem; font-size: 0.9rem;">Same results in-page. We cannot hide JobSpy.tech‚Äôs header/footer from here (cross-origin). If they add <code>?embed=1</code> support, we can use it to get a minimal view.</p>
            <div id="jtech-embed-content" class="jtech-embed-wrap" style="position: relative; min-height: 480px; border: 1px solid var(--border-color); border-radius: var(--radius); overflow: hidden; background: #f1f5f9;">
                <iframe id="jtech-embed-iframe" title="JobSpy.tech jobs" style="width: 100%; height: 640px; border: none;" src="about:blank"></iframe>
                <div id="jtech-embed-fallback" class="hidden" style="position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 1.5rem; text-align: center; background: #f8fafc;">
                    <p style="margin-bottom: 0.75rem;">Embed was blocked. Use the button above to open JobSpy.tech in a new tab.</p>
                    <a id="jtech-embed-open-tab" href="https://www.jobspy.tech/jobs" target="_blank" rel="noopener noreferrer" class="btn btn-primary">Open in new tab</a>
                </div>
            </div>
        </div>

        <div class="results-section">
            <div class="card">
                <h2>Also try</h2>
                <ul>
                    <li><strong><a href="jobspy.html">JobSpy (this API)</a></strong> ‚Äì python-jobspy scrapes Indeed, LinkedIn, Glassdoor, Google, ZipRecruiter, Naukri, Bayt, BDJobs.</li>
                    <li><strong>JobSpy via MCP</strong> ‚Äì Use the <a href="http://lobehub.com/mcp/yourorg-jobspy-mcp-server" target="_blank" rel="noopener noreferrer">JobSpy MCP Server</a> in Claude Desktop or Cursor for job search tools (local Python, no API key).</li>
                </ul>
            </div>
        </div>

        <footer class="page-footer">
            <p class="footer-by">Made with ‚ù§Ô∏è & üßë‚Äçüíª Sumit S C (mitSu)</p>
        </footer>
    </div>

    <script src="theme.js" defer></script>
    <script src="analytics.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (typeof initAnalyticsTracking === 'function') {
                initAnalyticsTracking({ site: 'railway-ui', baseEvent: 'jobspy-tech', endpoint: 'https://events.colab.indevs.in/api/events' });
            }
        });
    </script>
    <script>
        (function () {
            var q = document.getElementById('jtech-query');
            var loc = document.getElementById('jtech-location');
            var btn = document.getElementById('jtech-open-btn');
            var embedSection = document.getElementById('jtech-embed-section');
            var embedToggle = document.getElementById('jtech-embed-toggle');
            var embedContent = document.getElementById('jtech-embed-content');
            var iframe = document.getElementById('jtech-embed-iframe');
            var embedFallback = document.getElementById('jtech-embed-fallback');
            var embedOpenTab = document.getElementById('jtech-embed-open-tab');
            var params = new URLSearchParams(window.location.search);
            if (params.get('q') && q) q.value = params.get('q');
            if (params.get('location') && loc) loc.value = params.get('location');

            function buildUrl(useEmbedParam) {
                var base = 'https://www.jobspy.tech/jobs';
                var search = q && q.value.trim();
                var locationVal = loc && loc.value.trim();
                var p = new URLSearchParams();
                if (search) p.set('q', search);
                if (locationVal) p.set('location', locationVal);
                if (useEmbedParam) p.set('embed', '1');
                var queryString = p.toString();
                return queryString ? base + '?' + queryString : base;
            }

            function updateUrls() {
                var u = buildUrl(false);
                if (btn) btn.href = u;
                if (embedOpenTab) embedOpenTab.href = u;
                if (iframe && embedSection && embedSection.style.display !== 'none') {
                    iframe.src = buildUrl(true);
                }
            }

            if (btn) {
                btn.addEventListener('click', function () { btn.href = buildUrl(false); });
                btn.href = buildUrl(false);
            }

            if (embedToggle && embedSection && iframe) {
                embedToggle.addEventListener('click', function () {
                    var isExpanded = embedSection.style.display !== 'none';
                    if (isExpanded) {
                        embedSection.style.display = 'none';
                        embedToggle.setAttribute('aria-expanded', 'false');
                        embedToggle.textContent = 'Show embedded view';
                        iframe.src = 'about:blank';
                    } else {
                        embedSection.style.display = 'block';
                        embedToggle.setAttribute('aria-expanded', 'true');
                        embedToggle.textContent = 'Hide embedded view';
                        iframe.src = buildUrl(true);
                    }
                });
            }

            if (q) q.addEventListener('input', updateUrls);
            if (q) q.addEventListener('change', updateUrls);
            if (loc) loc.addEventListener('input', updateUrls);
            if (loc) loc.addEventListener('change', updateUrls);

            if (embedOpenTab) embedOpenTab.href = buildUrl(false);
        })();
    </script>
</body>
</html>
